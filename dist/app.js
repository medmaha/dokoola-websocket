import "dotenv/config";
import cors from "cors";
import express from "express";
import { ExpressApp, HttpServer } from "./config/index.js";
import { WSController } from "./controllers/ws/index.js";
import { requestLogger } from "./middleware/logger.js";
import { healthRouter, indexRouter } from "./routes/index.js";
var app = ExpressApp;
app.use(cors({ origin: "*" }));
app.use(express.json());
app.use(express.static("dist/public"));
app.use(requestLogger);
app.use("/", indexRouter);
app.use("/health", healthRouter);
var PORT = process.env.PORT;
var BASE_URL = process.env.BASE_URL;
HttpServer.listen(PORT, function () {
    console.log("Listening on port ".concat(BASE_URL, ":").concat(PORT));
    new WSController(HttpServer);
});
